{"version":3,"sources":["main.js"],"names":["currentPage","window","location","pathname","clickHandler","event","target","exe","e","logging","console","log","className","indexOf","onpageLinkHandler","linkWasClicked","backButtonWasClicked","url","portfolioHandler","imageWasClicked","clickedAgain","parentElement","clickedAgainP","link","element","backButton","distanceToTop","document","querySelector","getAttribute","classList","add","scrollIntoViewAndHighlight","oldBackButton","removeBackButton","createElement","scrollY","innerHTML","setTimeout","appendChild","addEventListener","runOnScroll","scrollIntoView","remove","d","Math","abs","threshold","style","opacity","removeChild","removeEventListener","currentPageNavLinkUnderline","a","querySelectorAll","b","body"],"mappings":"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","file":"main.js","sourcesContent":["/**\n * main.js\n */\n\nconst currentPage = {\n    \"url\": window.location.pathname\n};\n\n// Handles all the clicks on the page. Decides which function to call when something is clicked.\nconst clickHandler = {\n    event: {},\n    target: {}\n\n    // Chooses which function to call, based on what was clicked etc.\n    // Called by event listener, so [this] != clickHandler.\n    ,exe: function(e) {                     // e(vent)\n        clickHandler.event = e;             // Set event\n        clickHandler.target = e.target;     // Set target\n\n        if(logging===true) {\n            console.log(\"clickHandler: Something was clicked\");\n            console.log(\"    event: \", e);\n            console.log(\"    target: \", e.target, \"\\n\\n\");\n        }\n\n        // On-page link\n        if(e.target.className.indexOf(\"u-link-onpage\") !== -1) onpageLinkHandler.linkWasClicked(e.target);\n        if(e.target.className.indexOf(\"u-backbutton-link-onpage\") !== -1) onpageLinkHandler.backButtonWasClicked();\n\n        // Portfolio\n        if(currentPage.url === \"/work.html\") {\n            // Portfolio image is clicked\n            if(e.target.className.indexOf(\"portfolio-image\") !== -1 ) {\n                portfolioHandler.imageWasClicked(e.target);\n            }\n            // Caption text is clicked\n            if(e.target.className.indexOf(\"portfolio-caption\") !== -1 ) {\n                portfolioHandler.clickedAgain(e.target);\n            }\n            // Caption box *containing* the text is clicked (the Parent element)\n            if(e.target.parentElement.className.indexOf(\"portfolio-caption\") !== -1 ) {\n                portfolioHandler.clickedAgainP(e.target);\n            }\n        }\n\n    } // end exe\n};\n\nconst onpageLinkHandler = {\n\n    link: {}\n    ,element: {}\n    ,backButton: {\n        distanceToTop: 0\n    }\n\n    ,linkWasClicked: function(link) {\n        // The link that was clicked. Make it accessible by other functions.\n        this.link = link;\n\n        // The destination element\n        // Get the destination element via the data of the clicked element.\n        var element = document.querySelector(link.getAttribute(\"data-link-onpage\"));\n        this.element = element; // Make it accessible by other functions.\n\n        element.classList.add(\"u-position-relative\");  // So we can position the button next to it\n\n        this.scrollIntoViewAndHighlight(element);\n        \n        // Check if back button already exists. Remove if it does.\n        var oldBackButton = document.querySelector(\".u-backbutton-link-onpage\");\n        if(oldBackButton) this.removeBackButton(oldBackButton);\n\n        // Creates a button that will take the user back to the previous element they were looking at.\n        // The button is displayed adjacent to the new element.\n        this.backButton = document.createElement(\"button\");     // Create back button\n        var backButton = this.backButton;                       // Less typing\n        backButton.distanceToTop = window.scrollY;              // Get current distance from top of page\n        backButton.classList.add(\"u-button-simple\", \"u-backbutton-link-onpage\");\n        backButton.innerHTML = \"Go back\";\n\n        // Back button appears after highlight disappears (1.5s). Scroll event listener is attached\n        window.setTimeout(function(){\n            element.appendChild(backButton);  // Back button appears after element highlighted\n\n            // Back button will fade away on scroll. Event listener is attached after highlight disappears.\n            // Function needs to know where on the page we started and what button we're looking at.\n            window.addEventListener(\"scroll\", onpageLinkHandler.runOnScroll);\n        }, 1500);\n    }\n\n    ,backButtonWasClicked: function() {\n        this.scrollIntoViewAndHighlight(this.link);     // Scroll back to previous element when clicked\n        this.removeBackButton(this.backButton);         // Remove the back button and scroll listener\n    }\n\n    ,scrollIntoViewAndHighlight: function(element) {\n        element.scrollIntoView();                       // Scroll element into view\n        element.classList.add(\"u-_lookatme\");           // Make element noticeable\n\n        window.setTimeout(function() {                  // Remove noticeable class after 1.5s\n            element.classList.remove(\"u-_lookatme\");\n        }, 1500);\n    }\n\n    ,runOnScroll: function() {\n        var backButton = onpageLinkHandler.backButton; // Less typing\n\n        // Get distance scrolled away from back button\n        var d = window.scrollY - backButton.distanceToTop;\n\n        d = Math.abs(d);                                // Make sure value is positive (distance)\n        var threshold = 300;                            // Threshold to remove the button (in px)\n\n        // Back button disappears as user scrolls away. It's completely gone when threshold is reached.\n        backButton.style.opacity = (threshold - d) / threshold;\n\n        // If user scrolls past the threshold, remove the back button etc\n        if( d > threshold) {\n            onpageLinkHandler.removeBackButton();\n        }\n    }\n\n    // Remove back button and other stuff we used.\n    ,removeBackButton: function() {\n        this.backButton.parentElement.classList.remove(\"u-position-relative\");\n        this.backButton.parentElement.removeChild(this.backButton);\n        window.removeEventListener(\"scroll\", onpageLinkHandler.runOnScroll);\n    }\n};\n\nconst currentPageNavLinkUnderline = function() {\n    var a = document.querySelectorAll(\".link-nav\");         // Get the nav links.\n    var b = currentPage.url;                                // So we can type less\n    if(b === \"/posts.html\" || b === \"/work.html\" || b === \"/me.html\") {\n        document.querySelector('.link-nav[href*=\"' + b + '\"]').classList.add(\"u-_is-current-nav-link\");\n    }\n};\n\n// Code that runs //////////////////////////////////////////////////////////////////////////////////\nvar logging = false;\n// if(logging===true)console.log(\"\", \"\\n\\n\");\nconsole.log(\"logging: \", logging, \"\\n\\n\");\n\n// Listen for clicks on the page\ndocument.body.addEventListener(\"click\", clickHandler.exe, false);\n\n// Underline current nav link\ncurrentPageNavLinkUnderline();\n"]}