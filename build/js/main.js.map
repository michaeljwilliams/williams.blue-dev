{"version":3,"sources":["main.js"],"names":["currentPage","window","location","pathname","clickHandler","event","target","exe","e","logging","console","log","className","indexOf","onpageLinkHandler","linkWasClicked","backButtonWasClicked","galleryHandler","imageWasClicked","clickedAgain","parentElement","clickedAgainP","link","element","backButton","distanceToTop","document","querySelector","getAttribute","classList","add","scrollIntoViewAndHighlight","oldBackButton","removeBackButton","createElement","scrollY","innerHTML","setTimeout","appendChild","addEventListener","runOnScroll","scrollIntoView","remove","d","Math","abs","threshold","style","opacity","removeChild","removeEventListener","currentPageNavLinkUnderline","b","url","els","querySelectorAll","i","l","length","lastImageThatWasClicked","body"],"mappings":"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","file":"main.js","sourcesContent":["/**\n * main.js\n */\n\nconst currentPage = {\n    \"url\": window.location.pathname\n};\n\n// Handles all the clicks on the page. Decides which function to call when something is clicked.\nconst clickHandler = {\n    event: {},\n    target: {}\n\n    // Chooses which function to call, based on what was clicked etc.\n    // Called by event listener, so [this] != clickHandler.\n    ,exe: function(e) {                     // e(vent)\n        clickHandler.event = e;             // Set event\n        clickHandler.target = e.target;     // Set target\n\n        if(logging===true) {\n            console.log(\"clickHandler: Something was clicked\");\n            console.log(\"    event: \", e);\n            console.log(\"    target: \", e.target, \"\\n\\n\");\n        }\n\n        // On-page link\n        if(e.target.className.indexOf(\"u-link-onpage\") !== -1) onpageLinkHandler.linkWasClicked(e.target);\n        if(e.target.className.indexOf(\"u-backbutton-link-onpage\") !== -1) onpageLinkHandler.backButtonWasClicked();\n\n        // Gallery\n            // Gallery image is clicked\n            if(e.target.className.indexOf(\"gallery-image\") !== -1 ) {\n                galleryHandler.imageWasClicked(e.target);\n            }\n            // Caption text is clicked\n            if(e.target.className.indexOf(\"gallery-caption\") !== -1 ) {\n                galleryHandler.clickedAgain(e.target);\n            }\n            // Caption box *containing* the text is clicked (the Parent element)\n            if(e.target.parentElement.className.indexOf(\"gallery-caption\") !== -1 ) {\n                galleryHandler.clickedAgainP(e.target);\n            }\n\n    } // end exe\n};\n\nconst onpageLinkHandler = {\n\n    link: {}\n    ,element: {}\n    ,backButton: {\n        distanceToTop: 0\n    }\n\n    ,linkWasClicked: function(link) {\n        // The link that was clicked. Make it accessible by other functions.\n        this.link = link;\n\n        // The destination element\n        // Get the destination element via the data of the clicked element.\n        var element = document.querySelector(link.getAttribute(\"data-link-onpage\"));\n        this.element = element; // Make it accessible by other functions.\n\n        element.classList.add(\"u-position-relative\");  // So we can position the button next to it\n\n        this.scrollIntoViewAndHighlight(element);\n\n        // Check if back button already exists. Remove if it does.\n        var oldBackButton = document.querySelector(\".u-backbutton-link-onpage\");\n        if(oldBackButton) this.removeBackButton(oldBackButton);\n\n        // Creates a button that will take the user back to the previous element they were looking at.\n        // The button is displayed adjacent to the new element.\n        this.backButton = document.createElement(\"button\");     // Create back button\n        var backButton = this.backButton;                       // Less typing\n        backButton.distanceToTop = window.scrollY;              // Get current distance from top of page\n        backButton.classList.add(\"u-button-simple\", \"u-backbutton-link-onpage\");\n        backButton.innerHTML = \"Go back\";\n\n        // Back button appears after highlight disappears (1.5s). Scroll event listener is attached\n        window.setTimeout(function(){\n            element.appendChild(backButton);  // Back button appears after element highlighted\n\n            // Back button will fade away on scroll. Event listener is attached after highlight disappears.\n            // Function needs to know where on the page we started and what button we're looking at.\n            window.addEventListener(\"scroll\", onpageLinkHandler.runOnScroll);\n        }, 1500);\n    }\n\n    ,backButtonWasClicked: function() {\n        this.scrollIntoViewAndHighlight(this.link);     // Scroll back to previous element when clicked\n        this.removeBackButton(this.backButton);         // Remove the back button and scroll listener\n    }\n\n    ,scrollIntoViewAndHighlight: function(element) {\n        element.scrollIntoView();                       // Scroll element into view\n        element.classList.add(\"u-_lookatme\");           // Make element noticeable\n\n        window.setTimeout(function() {                  // Remove noticeable class after 1.5s\n            element.classList.remove(\"u-_lookatme\");\n        }, 1500);\n    }\n\n    ,runOnScroll: function() {\n        var backButton = onpageLinkHandler.backButton; // Less typing\n\n        // Get distance scrolled away from back button\n        var d = window.scrollY - backButton.distanceToTop;\n\n        d = Math.abs(d);                                // Make sure value is positive (distance)\n        var threshold = 300;                            // Threshold to remove the button (in px)\n\n        // Back button disappears as user scrolls away. It's completely gone when threshold is reached.\n        backButton.style.opacity = (threshold - d) / threshold;\n\n        // If user scrolls past the threshold, remove the back button etc\n        if( d > threshold) {\n            onpageLinkHandler.removeBackButton();\n        }\n    }\n\n    // Remove back button and other stuff we used.\n    ,removeBackButton: function() {\n        this.backButton.parentElement.classList.remove(\"u-position-relative\");\n        this.backButton.parentElement.removeChild(this.backButton);\n        window.removeEventListener(\"scroll\", onpageLinkHandler.runOnScroll);\n    }\n};\n\nconst currentPageNavLinkUnderline = function() {\n    var b = currentPage.url; // So I can type less\n    if(b === \"/\") b = \"/index.html\"; // Index.html doesn't show in url\n    if(b === \"/index.html\" || b === \"/posts.html\" || b === \"/code.html\" || b === \"/design.html\" || b === \"/me.html\") {\n        let els = document.querySelectorAll('.link-nav[href*=\"' + b + '\"]')\n        for (let i = 0, l = els.length; i < l; i++) {\n            els[i].classList.add(\"u-_is-current-nav-link\");\n        }\n    }\n};\n\nconst galleryHandler = {\n\n    lastImageThatWasClicked: false\n\n    ,imageWasClicked: function(target) {\n        if(this.lastImageThatWasClicked !== false) this.lastImageThatWasClicked.parentElement.querySelector(\"div\").classList.add(\"u-_is-invisible\");\n        this.lastImageThatWasClicked = target;\n        target.parentElement.querySelector(\"div\").classList.remove(\"u-_is-invisible\");\n    }\n\n    ,clickedAgain: function(target) {\n        target.classList.add(\"u-_is-invisible\");\n    }\n    ,clickedAgainP: function(target) {\n        target.parentElement.classList.add(\"u-_is-invisible\");\n    }\n\n};\n\n// Code that runs //////////////////////////////////////////////////////////////////////////////////\nvar logging = false;\n// if(logging===true)console.log(\"\", \"\\n\\n\");\nconsole.log(\"logging: \", logging, \"\\n\\n\");\n\n// Listen for clicks on the page\ndocument.body.addEventListener(\"click\", clickHandler.exe, false);\n\n// Underline current nav link\ncurrentPageNavLinkUnderline();\n"]}